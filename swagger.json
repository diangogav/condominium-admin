{"openapi":"3.0.3","info":{"title":"Condominio API","description":"Backend API for Condominio mobile application","version":"1.0.0"},"tags":[{"name":"Auth","description":"Authentication endpoints"},{"name":"Users","description":"User profile management"},{"name":"Buildings","description":"Building information"},{"name":"Payments","description":"Payment management"}],"components":{"securitySchemes":{"BearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT","description":"Enter your JWT token from /auth/login"}},"schemas":{}},"security":[{"BearerAuth":[]}],"paths":{"/auth/register":{"post":{"parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"access_token":{"type":"string"},"refresh_token":{"type":"string"},"expires_in":{"type":"number"},"user":{"type":"object","required":["id","role"],"properties":{"id":{"type":"string"},"email":{"type":"string"},"role":{"type":"string"}}}},"required":["access_token","refresh_token","expires_in","user"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"access_token":{"type":"string"},"refresh_token":{"type":"string"},"expires_in":{"type":"number"},"user":{"type":"object","required":["id","role"],"properties":{"id":{"type":"string"},"email":{"type":"string"},"role":{"type":"string"}}}},"required":["access_token","refresh_token","expires_in","user"]}},"text/plain":{"schema":{"type":"object","properties":{"access_token":{"type":"string"},"refresh_token":{"type":"string"},"expires_in":{"type":"number"},"user":{"type":"object","required":["id","role"],"properties":{"id":{"type":"string"},"email":{"type":"string"},"role":{"type":"string"}}}},"required":["access_token","refresh_token","expires_in","user"]}}}}},"operationId":"postAuthRegister","tags":["Auth"],"summary":"Register a new resident","description":"Creates a new user account and profile. Returns JWT token for immediate login.","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","email","password","unit_id","building_id"],"properties":{"name":{"minLength":1,"examples":["Juan Pérez"],"type":"string"},"email":{"format":"email","examples":["juan.perez@example.com"],"type":"string"},"password":{"minLength":6,"examples":["SecurePass123"],"type":"string"},"unit_id":{"format":"uuid","examples":["d047cca7-d97f-480f-b747-042b88c26228"],"type":"string"},"building_id":{"format":"uuid","examples":["d047cca7-d97f-480f-b747-042b88c26228"],"type":"string"}}}},"multipart/form-data":{"schema":{"type":"object","required":["name","email","password","unit_id","building_id"],"properties":{"name":{"minLength":1,"examples":["Juan Pérez"],"type":"string"},"email":{"format":"email","examples":["juan.perez@example.com"],"type":"string"},"password":{"minLength":6,"examples":["SecurePass123"],"type":"string"},"unit_id":{"format":"uuid","examples":["d047cca7-d97f-480f-b747-042b88c26228"],"type":"string"},"building_id":{"format":"uuid","examples":["d047cca7-d97f-480f-b747-042b88c26228"],"type":"string"}}}},"text/plain":{"schema":{"type":"object","required":["name","email","password","unit_id","building_id"],"properties":{"name":{"minLength":1,"examples":["Juan Pérez"],"type":"string"},"email":{"format":"email","examples":["juan.perez@example.com"],"type":"string"},"password":{"minLength":6,"examples":["SecurePass123"],"type":"string"},"unit_id":{"format":"uuid","examples":["d047cca7-d97f-480f-b747-042b88c26228"],"type":"string"},"building_id":{"format":"uuid","examples":["d047cca7-d97f-480f-b747-042b88c26228"],"type":"string"}}}}}}}},"/auth/login":{"post":{"parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"access_token":{"type":"string"},"refresh_token":{"type":"string"},"expires_in":{"type":"number"},"user":{"type":"object","required":["id","role"],"properties":{"id":{"type":"string"},"email":{"type":"string"},"role":{"type":"string"}}}},"required":["access_token","refresh_token","expires_in","user"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"access_token":{"type":"string"},"refresh_token":{"type":"string"},"expires_in":{"type":"number"},"user":{"type":"object","required":["id","role"],"properties":{"id":{"type":"string"},"email":{"type":"string"},"role":{"type":"string"}}}},"required":["access_token","refresh_token","expires_in","user"]}},"text/plain":{"schema":{"type":"object","properties":{"access_token":{"type":"string"},"refresh_token":{"type":"string"},"expires_in":{"type":"number"},"user":{"type":"object","required":["id","role"],"properties":{"id":{"type":"string"},"email":{"type":"string"},"role":{"type":"string"}}}},"required":["access_token","refresh_token","expires_in","user"]}}}}},"operationId":"postAuthLogin","tags":["Auth"],"summary":"Login user","description":"Authenticates user and returns JWT token with user profile.","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","password"],"properties":{"email":{"format":"email","examples":["juan.perez@example.com"],"type":"string"},"password":{"examples":["SecurePass123"],"type":"string"}}}},"multipart/form-data":{"schema":{"type":"object","required":["email","password"],"properties":{"email":{"format":"email","examples":["juan.perez@example.com"],"type":"string"},"password":{"examples":["SecurePass123"],"type":"string"}}}},"text/plain":{"schema":{"type":"object","required":["email","password"],"properties":{"email":{"format":"email","examples":["juan.perez@example.com"],"type":"string"},"password":{"examples":["SecurePass123"],"type":"string"}}}}}}}},"/users/me":{"get":{"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}},"required":["id","email","name","role","status","units"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}},"required":["id","email","name","role","status","units"]}},"text/plain":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}},"required":["id","email","name","role","status","units"]}}}}},"operationId":"getUsersMe","tags":["Users"],"summary":"Get current user profile"},"patch":{"parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}},"required":["id","email","name","role","status","units"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}},"required":["id","email","name","role","status","units"]}},"text/plain":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}},"required":["id","email","name","role","status","units"]}}}}},"operationId":"patchUsersMe","tags":["Users"],"summary":"Update user profile","description":"Update current user profile information. All fields are optional.","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"examples":["Juan Pérez Actualizado"],"type":"string"},"phone":{"examples":["+58 412-1234567","04121234567"],"type":"string"},"settings":{}}}},"multipart/form-data":{"schema":{"type":"object","properties":{"name":{"examples":["Juan Pérez Actualizado"],"type":"string"},"phone":{"examples":["+58 412-1234567","04121234567"],"type":"string"},"settings":{}}}},"text/plain":{"schema":{"type":"object","properties":{"name":{"examples":["Juan Pérez Actualizado"],"type":"string"},"phone":{"examples":["+58 412-1234567","04121234567"],"type":"string"},"settings":{}}}}}}}},"/users/":{"get":{"parameters":[{"schema":{"type":"string"},"in":"query","name":"building_id","required":false},{"schema":{"type":"string"},"in":"query","name":"unit_id","required":false},{"schema":{"type":"string"},"in":"query","name":"role","required":false},{"schema":{"type":"string"},"in":"query","name":"status","required":false}],"responses":{"200":{"items":{"type":"object","required":["id","email","name","role","status","units"],"properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}}},"content":{"application/json":{"schema":{"type":"array","items":{"type":"object","required":["id","email","name","role","status","units"],"properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}}}}},"multipart/form-data":{"schema":{"type":"array","items":{"type":"object","required":["id","email","name","role","status","units"],"properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}}}}},"text/plain":{"schema":{"type":"array","items":{"type":"object","required":["id","email","name","role","status","units"],"properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}}}}}}}},"operationId":"getUsers","tags":["Users"],"summary":"List all users (Admin/Board)","description":"Admin sees all users, Board members see only their building users","security":[{"BearerAuth":[]}]},"post":{"parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}},"required":["id","email","name","role","status","units"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}},"required":["id","email","name","role","status","units"]}},"text/plain":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}},"required":["id","email","name","role","status","units"]}}}}},"operationId":"postUsers","tags":["Users"],"summary":"Create new user (Admin only)","description":"Creates a new user with specified role (e.g. board member). User is auto-activated.","security":[{"BearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","password","name","role","building_id"],"properties":{"email":{"type":"string"},"password":{"type":"string"},"name":{"type":"string"},"role":{"anyOf":[{"const":"admin","type":"string"},{"const":"board","type":"string"},{"const":"resident","type":"string"}]},"building_id":{"type":"string"},"unit_id":{"type":"string"},"phone":{"type":"string"}}}},"multipart/form-data":{"schema":{"type":"object","required":["email","password","name","role","building_id"],"properties":{"email":{"type":"string"},"password":{"type":"string"},"name":{"type":"string"},"role":{"anyOf":[{"const":"admin","type":"string"},{"const":"board","type":"string"},{"const":"resident","type":"string"}]},"building_id":{"type":"string"},"unit_id":{"type":"string"},"phone":{"type":"string"}}}},"text/plain":{"schema":{"type":"object","required":["email","password","name","role","building_id"],"properties":{"email":{"type":"string"},"password":{"type":"string"},"name":{"type":"string"},"role":{"anyOf":[{"const":"admin","type":"string"},{"const":"board","type":"string"},{"const":"resident","type":"string"}]},"building_id":{"type":"string"},"unit_id":{"type":"string"},"phone":{"type":"string"}}}}}}}},"/users/{id}":{"get":{"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}},"required":["id","email","name","role","status","units"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}},"required":["id","email","name","role","status","units"]}},"text/plain":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}},"required":["id","email","name","role","status","units"]}}}}},"operationId":"getUsersById","tags":["Users"],"summary":"Get user by ID (Admin/Board)","security":[{"BearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}]},"patch":{"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}},"required":["id","email","name","role","status","units"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}},"required":["id","email","name","role","status","units"]}},"text/plain":{"schema":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"role":{"type":"string"},"status":{"type":"string"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}]},"units":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}},"created_at":{},"updated_at":{}},"required":["id","email","name","role","status","units"]}}}}},"operationId":"patchUsersById","tags":["Users"],"summary":"Update user (Admin/Board)","description":"Update user information. Only admins can change roles.","security":[{"BearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"phone":{"type":"string"},"unit_id":{"type":"string"},"role":{"anyOf":[{"const":"resident","type":"string"},{"const":"board","type":"string"},{"const":"admin","type":"string"}]},"status":{"type":"string"},"building_id":{"type":"string"}}}},"multipart/form-data":{"schema":{"type":"object","properties":{"name":{"type":"string"},"phone":{"type":"string"},"unit_id":{"type":"string"},"role":{"anyOf":[{"const":"resident","type":"string"},{"const":"board","type":"string"},{"const":"admin","type":"string"}]},"status":{"type":"string"},"building_id":{"type":"string"}}}},"text/plain":{"schema":{"type":"object","properties":{"name":{"type":"string"},"phone":{"type":"string"},"unit_id":{"type":"string"},"role":{"anyOf":[{"const":"resident","type":"string"},{"const":"board","type":"string"},{"const":"admin","type":"string"}]},"status":{"type":"string"},"building_id":{"type":"string"}}}}}}},"delete":{"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]}},"text/plain":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]}}}}},"operationId":"deleteUsersById","tags":["Users"],"summary":"Delete user (Admin only)","security":[{"BearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}]}},"/users/{id}/approve":{"post":{"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]}},"text/plain":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]}}}}},"operationId":"postUsersByIdApprove","tags":["Users"],"summary":"Approve user registration (Admin/Board)","security":[{"BearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}]}},"/users/{id}/units":{"get":{"responses":{"200":{"items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}},"content":{"application/json":{"schema":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}}},"multipart/form-data":{"schema":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}}},"text/plain":{"schema":{"type":"array","items":{"type":"object","required":["unit_id","role","is_primary"],"properties":{"unit_id":{"type":"string"},"building_id":{"type":"string"},"role":{"type":"string"},"is_primary":{"type":"boolean"}}}}}}}},"operationId":"getUsersByIdUnits","tags":["Users"],"summary":"Get user units","security":[{"BearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}]},"post":{"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]}},"text/plain":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]}}}}},"operationId":"postUsersByIdUnits","tags":["Users"],"summary":"Assign unit to user (Admin/Board)","security":[{"BearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["unit_id","role"],"properties":{"unit_id":{"type":"string"},"role":{"anyOf":[{"const":"owner","type":"string"},{"const":"resident","type":"string"}]},"is_primary":{"type":"boolean"}}}},"multipart/form-data":{"schema":{"type":"object","required":["unit_id","role"],"properties":{"unit_id":{"type":"string"},"role":{"anyOf":[{"const":"owner","type":"string"},{"const":"resident","type":"string"}]},"is_primary":{"type":"boolean"}}}},"text/plain":{"schema":{"type":"object","required":["unit_id","role"],"properties":{"unit_id":{"type":"string"},"role":{"anyOf":[{"const":"owner","type":"string"},{"const":"resident","type":"string"}]},"is_primary":{"type":"boolean"}}}}}}}},"/buildings/":{"get":{"responses":{"200":{"items":{"type":"object","required":["id","name","address","created_at"],"properties":{"id":{"type":"string"},"name":{"type":"string"},"address":{"type":"string"},"created_at":{},"updated_at":{}}},"content":{"application/json":{"schema":{"type":"array","items":{"type":"object","required":["id","name","address","created_at"],"properties":{"id":{"type":"string"},"name":{"type":"string"},"address":{"type":"string"},"created_at":{},"updated_at":{}}}}},"multipart/form-data":{"schema":{"type":"array","items":{"type":"object","required":["id","name","address","created_at"],"properties":{"id":{"type":"string"},"name":{"type":"string"},"address":{"type":"string"},"created_at":{},"updated_at":{}}}}},"text/plain":{"schema":{"type":"array","items":{"type":"object","required":["id","name","address","created_at"],"properties":{"id":{"type":"string"},"name":{"type":"string"},"address":{"type":"string"},"created_at":{},"updated_at":{}}}}}}}},"operationId":"getBuildings","tags":["Buildings"],"summary":"List all available buildings"},"post":{"parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"address":{"type":"string"},"created_at":{},"updated_at":{}},"required":["id","name","address","created_at"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"address":{"type":"string"},"created_at":{},"updated_at":{}},"required":["id","name","address","created_at"]}},"text/plain":{"schema":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"address":{"type":"string"},"created_at":{},"updated_at":{}},"required":["id","name","address","created_at"]}}}}},"operationId":"postBuildings","tags":["Buildings"],"summary":"Create a new building (Admin only)","security":[{"BearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","address"],"properties":{"name":{"minLength":1,"type":"string"},"address":{"minLength":1,"type":"string"}}}},"multipart/form-data":{"schema":{"type":"object","required":["name","address"],"properties":{"name":{"minLength":1,"type":"string"},"address":{"minLength":1,"type":"string"}}}},"text/plain":{"schema":{"type":"object","required":["name","address"],"properties":{"name":{"minLength":1,"type":"string"},"address":{"minLength":1,"type":"string"}}}}}}}},"/buildings/{id}":{"get":{"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"address":{"type":"string"},"created_at":{},"updated_at":{}},"required":["id","name","address","created_at"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"address":{"type":"string"},"created_at":{},"updated_at":{}},"required":["id","name","address","created_at"]}},"text/plain":{"schema":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"address":{"type":"string"},"created_at":{},"updated_at":{}},"required":["id","name","address","created_at"]}}}}},"operationId":"getBuildingsById","tags":["Buildings"],"summary":"Get building by ID","parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}]},"patch":{"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"address":{"type":"string"},"created_at":{},"updated_at":{}},"required":["id","name","address","created_at"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"address":{"type":"string"},"created_at":{},"updated_at":{}},"required":["id","name","address","created_at"]}},"text/plain":{"schema":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"address":{"type":"string"},"created_at":{},"updated_at":{}},"required":["id","name","address","created_at"]}}}}},"operationId":"patchBuildingsById","tags":["Buildings"],"summary":"Update a building (Admin only)","security":[{"BearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"minLength":1,"type":"string"},"address":{"minLength":1,"type":"string"}}}},"multipart/form-data":{"schema":{"type":"object","properties":{"name":{"minLength":1,"type":"string"},"address":{"minLength":1,"type":"string"}}}},"text/plain":{"schema":{"type":"object","properties":{"name":{"minLength":1,"type":"string"},"address":{"minLength":1,"type":"string"}}}}}}}},"/buildings/{id}/units":{"get":{"responses":{"200":{"items":{"type":"object","required":["id","building_id","name"],"properties":{"id":{"type":"string"},"building_id":{"type":"string"},"name":{"type":"string"},"floor":{"type":"string"},"aliquot":{"type":"number"},"created_at":{},"updated_at":{}}},"content":{"application/json":{"schema":{"type":"array","items":{"type":"object","required":["id","building_id","name"],"properties":{"id":{"type":"string"},"building_id":{"type":"string"},"name":{"type":"string"},"floor":{"type":"string"},"aliquot":{"type":"number"},"created_at":{},"updated_at":{}}}}},"multipart/form-data":{"schema":{"type":"array","items":{"type":"object","required":["id","building_id","name"],"properties":{"id":{"type":"string"},"building_id":{"type":"string"},"name":{"type":"string"},"floor":{"type":"string"},"aliquot":{"type":"number"},"created_at":{},"updated_at":{}}}}},"text/plain":{"schema":{"type":"array","items":{"type":"object","required":["id","building_id","name"],"properties":{"id":{"type":"string"},"building_id":{"type":"string"},"name":{"type":"string"},"floor":{"type":"string"},"aliquot":{"type":"number"},"created_at":{},"updated_at":{}}}}}}}},"operationId":"getBuildingsByIdUnits","tags":["Units"],"summary":"List units for a building","parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}]},"post":{"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"building_id":{"type":"string"},"name":{"type":"string"},"floor":{"type":"string"},"aliquot":{"type":"number"},"created_at":{},"updated_at":{}},"required":["id","building_id","name"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"id":{"type":"string"},"building_id":{"type":"string"},"name":{"type":"string"},"floor":{"type":"string"},"aliquot":{"type":"number"},"created_at":{},"updated_at":{}},"required":["id","building_id","name"]}},"text/plain":{"schema":{"type":"object","properties":{"id":{"type":"string"},"building_id":{"type":"string"},"name":{"type":"string"},"floor":{"type":"string"},"aliquot":{"type":"number"},"created_at":{},"updated_at":{}},"required":["id","building_id","name"]}}}}},"operationId":"postBuildingsByIdUnits","tags":["Units"],"summary":"Create a single unit (Admin only)","security":[{"BearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name"],"properties":{"name":{"minLength":1,"type":"string"},"floor":{"type":"string"},"aliquot":{"type":"number"}}}},"multipart/form-data":{"schema":{"type":"object","required":["name"],"properties":{"name":{"minLength":1,"type":"string"},"floor":{"type":"string"},"aliquot":{"type":"number"}}}},"text/plain":{"schema":{"type":"object","required":["name"],"properties":{"name":{"minLength":1,"type":"string"},"floor":{"type":"string"},"aliquot":{"type":"number"}}}}}}}},"/buildings/units/{id}":{"get":{"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"building_id":{"type":"string"},"name":{"type":"string"},"floor":{"type":"string"},"aliquot":{"type":"number"},"created_at":{},"updated_at":{}},"required":["id","building_id","name"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"id":{"type":"string"},"building_id":{"type":"string"},"name":{"type":"string"},"floor":{"type":"string"},"aliquot":{"type":"number"},"created_at":{},"updated_at":{}},"required":["id","building_id","name"]}},"text/plain":{"schema":{"type":"object","properties":{"id":{"type":"string"},"building_id":{"type":"string"},"name":{"type":"string"},"floor":{"type":"string"},"aliquot":{"type":"number"},"created_at":{},"updated_at":{}},"required":["id","building_id","name"]}}}}},"operationId":"getBuildingsUnitsById","tags":["Units"],"summary":"Get unit by ID","parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}]}},"/buildings/{id}/units/batch":{"post":{"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"count":{"type":"number"},"units":{"type":"array","items":{"type":"object","required":["id","building_id","name"],"properties":{"id":{"type":"string"},"building_id":{"type":"string"},"name":{"type":"string"},"floor":{"type":"string"},"aliquot":{"type":"number"},"created_at":{},"updated_at":{}}}}},"required":["count","units"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"count":{"type":"number"},"units":{"type":"array","items":{"type":"object","required":["id","building_id","name"],"properties":{"id":{"type":"string"},"building_id":{"type":"string"},"name":{"type":"string"},"floor":{"type":"string"},"aliquot":{"type":"number"},"created_at":{},"updated_at":{}}}}},"required":["count","units"]}},"text/plain":{"schema":{"type":"object","properties":{"count":{"type":"number"},"units":{"type":"array","items":{"type":"object","required":["id","building_id","name"],"properties":{"id":{"type":"string"},"building_id":{"type":"string"},"name":{"type":"string"},"floor":{"type":"string"},"aliquot":{"type":"number"},"created_at":{},"updated_at":{}}}}},"required":["count","units"]}}}}},"operationId":"postBuildingsByIdUnitsBatch","tags":["Units"],"summary":"Batch create units (Admin only)","security":[{"BearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["floors","unitsPerFloor"],"properties":{"floors":{"type":"array","items":{"type":"string"}},"unitsPerFloor":{"type":"array","items":{"type":"string"}}}}},"multipart/form-data":{"schema":{"type":"object","required":["floors","unitsPerFloor"],"properties":{"floors":{"type":"array","items":{"type":"string"}},"unitsPerFloor":{"type":"array","items":{"type":"string"}}}}},"text/plain":{"schema":{"type":"object","required":["floors","unitsPerFloor"],"properties":{"floors":{"type":"array","items":{"type":"string"}},"unitsPerFloor":{"type":"array","items":{"type":"string"}}}}}}}}},"/payments/":{"get":{"parameters":[{"schema":{"type":"string"},"in":"query","name":"year","required":false},{"schema":{"type":"string"},"in":"query","name":"unit_id","required":false},{"schema":{"type":"string"},"in":"query","name":"building_id","required":false}],"responses":{"200":{"items":{"type":"object","required":["id","amount","payment_date","status","method","unit_id"],"properties":{"id":{"type":"string"},"amount":{"type":"number"},"currency":{"type":"string"},"payment_date":{},"status":{"type":"string"},"method":{"type":"string"},"reference":{"type":"string"},"bank":{"type":"string"},"unit_id":{"type":"string"},"building_id":{"type":"string"},"proof_url":{"type":"string"},"notes":{"type":"string"},"periods":{"type":"array","items":{"type":"string"}},"allocations":{"type":"array","items":{}},"created_at":{},"updated_at":{}}},"content":{"application/json":{"schema":{"type":"array","items":{"type":"object","required":["id","amount","payment_date","status","method","unit_id"],"properties":{"id":{"type":"string"},"amount":{"type":"number"},"currency":{"type":"string"},"payment_date":{},"status":{"type":"string"},"method":{"type":"string"},"reference":{"type":"string"},"bank":{"type":"string"},"unit_id":{"type":"string"},"building_id":{"type":"string"},"proof_url":{"type":"string"},"notes":{"type":"string"},"periods":{"type":"array","items":{"type":"string"}},"allocations":{"type":"array","items":{}},"created_at":{},"updated_at":{}}}}},"multipart/form-data":{"schema":{"type":"array","items":{"type":"object","required":["id","amount","payment_date","status","method","unit_id"],"properties":{"id":{"type":"string"},"amount":{"type":"number"},"currency":{"type":"string"},"payment_date":{},"status":{"type":"string"},"method":{"type":"string"},"reference":{"type":"string"},"bank":{"type":"string"},"unit_id":{"type":"string"},"building_id":{"type":"string"},"proof_url":{"type":"string"},"notes":{"type":"string"},"periods":{"type":"array","items":{"type":"string"}},"allocations":{"type":"array","items":{}},"created_at":{},"updated_at":{}}}}},"text/plain":{"schema":{"type":"array","items":{"type":"object","required":["id","amount","payment_date","status","method","unit_id"],"properties":{"id":{"type":"string"},"amount":{"type":"number"},"currency":{"type":"string"},"payment_date":{},"status":{"type":"string"},"method":{"type":"string"},"reference":{"type":"string"},"bank":{"type":"string"},"unit_id":{"type":"string"},"building_id":{"type":"string"},"proof_url":{"type":"string"},"notes":{"type":"string"},"periods":{"type":"array","items":{"type":"string"}},"allocations":{"type":"array","items":{}},"created_at":{},"updated_at":{}}}}}}}},"operationId":"getPayments","tags":["Payments"],"summary":"Get user payment history"},"post":{"parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"amount":{"type":"number"},"currency":{"type":"string"},"payment_date":{},"status":{"type":"string"},"method":{"type":"string"},"reference":{"type":"string"},"bank":{"type":"string"},"unit_id":{"type":"string"},"building_id":{"type":"string"},"proof_url":{"type":"string"},"notes":{"type":"string"},"periods":{"type":"array","items":{"type":"string"}},"allocations":{"type":"array","items":{}},"created_at":{},"updated_at":{}},"required":["id","amount","payment_date","status","method","unit_id"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"id":{"type":"string"},"amount":{"type":"number"},"currency":{"type":"string"},"payment_date":{},"status":{"type":"string"},"method":{"type":"string"},"reference":{"type":"string"},"bank":{"type":"string"},"unit_id":{"type":"string"},"building_id":{"type":"string"},"proof_url":{"type":"string"},"notes":{"type":"string"},"periods":{"type":"array","items":{"type":"string"}},"allocations":{"type":"array","items":{}},"created_at":{},"updated_at":{}},"required":["id","amount","payment_date","status","method","unit_id"]}},"text/plain":{"schema":{"type":"object","properties":{"id":{"type":"string"},"amount":{"type":"number"},"currency":{"type":"string"},"payment_date":{},"status":{"type":"string"},"method":{"type":"string"},"reference":{"type":"string"},"bank":{"type":"string"},"unit_id":{"type":"string"},"building_id":{"type":"string"},"proof_url":{"type":"string"},"notes":{"type":"string"},"periods":{"type":"array","items":{"type":"string"}},"allocations":{"type":"array","items":{}},"created_at":{},"updated_at":{}},"required":["id","amount","payment_date","status","method","unit_id"]}}}}},"operationId":"postPayments","tags":["Payments"],"summary":"Report a new payment","description":"Submit a payment report with optional proof image. Payment will be in PENDING status until approved.","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["amount","date","method"],"properties":{"amount":{"minimum":0,"examples":[50,"75.50",100],"anyOf":[{"type":"number"},{"type":"string"}]},"date":{"examples":["2026-01-15","2026-01-29"],"type":"string"},"method":{"examples":["PAGO_MOVIL"],"anyOf":[{"const":"PAGO_MOVIL","type":"string"},{"const":"TRANSFER","type":"string"},{"const":"CASH","type":"string"}]},"reference":{"examples":["123456789","REF-2024-001"],"type":"string"},"bank":{"examples":["Banco de Venezuela","Banesco","Mercantil"],"type":"string"},"proof_image":{"default":"File","type":"string","format":"binary"},"periods":{"examples":["2026-01",["2026-01","2026-02"]],"anyOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]},"building_id":{"type":"string"},"unit_id":{"type":"string"},"notes":{"type":"string"},"allocations":{"type":"array","items":{"type":"object","required":["invoice_id","amount"],"properties":{"invoice_id":{"type":"string"},"amount":{"type":"number"}}}}}}},"multipart/form-data":{"schema":{"type":"object","required":["amount","date","method"],"properties":{"amount":{"minimum":0,"examples":[50,"75.50",100],"anyOf":[{"type":"number"},{"type":"string"}]},"date":{"examples":["2026-01-15","2026-01-29"],"type":"string"},"method":{"examples":["PAGO_MOVIL"],"anyOf":[{"const":"PAGO_MOVIL","type":"string"},{"const":"TRANSFER","type":"string"},{"const":"CASH","type":"string"}]},"reference":{"examples":["123456789","REF-2024-001"],"type":"string"},"bank":{"examples":["Banco de Venezuela","Banesco","Mercantil"],"type":"string"},"proof_image":{"default":"File","type":"string","format":"binary"},"periods":{"examples":["2026-01",["2026-01","2026-02"]],"anyOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]},"building_id":{"type":"string"},"unit_id":{"type":"string"},"notes":{"type":"string"},"allocations":{"type":"array","items":{"type":"object","required":["invoice_id","amount"],"properties":{"invoice_id":{"type":"string"},"amount":{"type":"number"}}}}}}},"text/plain":{"schema":{"type":"object","required":["amount","date","method"],"properties":{"amount":{"minimum":0,"examples":[50,"75.50",100],"anyOf":[{"type":"number"},{"type":"string"}]},"date":{"examples":["2026-01-15","2026-01-29"],"type":"string"},"method":{"examples":["PAGO_MOVIL"],"anyOf":[{"const":"PAGO_MOVIL","type":"string"},{"const":"TRANSFER","type":"string"},{"const":"CASH","type":"string"}]},"reference":{"examples":["123456789","REF-2024-001"],"type":"string"},"bank":{"examples":["Banco de Venezuela","Banesco","Mercantil"],"type":"string"},"proof_image":{"default":"File","type":"string","format":"binary"},"periods":{"examples":["2026-01",["2026-01","2026-02"]],"anyOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]},"building_id":{"type":"string"},"unit_id":{"type":"string"},"notes":{"type":"string"},"allocations":{"type":"array","items":{"type":"object","required":["invoice_id","amount"],"properties":{"invoice_id":{"type":"string"},"amount":{"type":"number"}}}}}}}}}}},"/payments/summary":{"get":{"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"solvency_status":{"type":"string"},"last_payment_date":{"anyOf":[{"type":"string"},{"type":"null"}]},"pending_periods":{"type":"array","items":{"type":"string"}},"paid_periods":{"type":"array","items":{"type":"string"}},"recent_transactions":{"type":"array","items":{"type":"object","required":["id","amount","payment_date","method","status"],"properties":{"id":{"type":"string"},"amount":{"type":"number"},"payment_date":{"type":"string"},"method":{"type":"string"},"status":{"type":"string"},"periods":{"type":"array","items":{"type":"string"}}}}}},"required":["solvency_status","last_payment_date","pending_periods","paid_periods","recent_transactions"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"solvency_status":{"type":"string"},"last_payment_date":{"anyOf":[{"type":"string"},{"type":"null"}]},"pending_periods":{"type":"array","items":{"type":"string"}},"paid_periods":{"type":"array","items":{"type":"string"}},"recent_transactions":{"type":"array","items":{"type":"object","required":["id","amount","payment_date","method","status"],"properties":{"id":{"type":"string"},"amount":{"type":"number"},"payment_date":{"type":"string"},"method":{"type":"string"},"status":{"type":"string"},"periods":{"type":"array","items":{"type":"string"}}}}}},"required":["solvency_status","last_payment_date","pending_periods","paid_periods","recent_transactions"]}},"text/plain":{"schema":{"type":"object","properties":{"solvency_status":{"type":"string"},"last_payment_date":{"anyOf":[{"type":"string"},{"type":"null"}]},"pending_periods":{"type":"array","items":{"type":"string"}},"paid_periods":{"type":"array","items":{"type":"string"}},"recent_transactions":{"type":"array","items":{"type":"object","required":["id","amount","payment_date","method","status"],"properties":{"id":{"type":"string"},"amount":{"type":"number"},"payment_date":{"type":"string"},"method":{"type":"string"},"status":{"type":"string"},"periods":{"type":"array","items":{"type":"string"}}}}}},"required":["solvency_status","last_payment_date","pending_periods","paid_periods","recent_transactions"]}}}}},"operationId":"getPaymentsSummary","tags":["Payments"],"summary":"Get payment summary with solvency status","description":"Returns payment history, solvency status, pending periods, and recent transactions"}},"/payments/{id}":{"get":{"responses":{"200":{"anyOf":[{"type":"object","required":["id","amount","payment_date","status","method","unit_id"],"properties":{"id":{"type":"string"},"amount":{"type":"number"},"currency":{"type":"string"},"payment_date":{},"status":{"type":"string"},"method":{"type":"string"},"reference":{"type":"string"},"bank":{"type":"string"},"unit_id":{"type":"string"},"building_id":{"type":"string"},"proof_url":{"type":"string"},"notes":{"type":"string"},"periods":{"type":"array","items":{"type":"string"}},"allocations":{"type":"array","items":{}},"created_at":{},"updated_at":{}}},{"type":"null"}],"content":{"application/json":{"schema":{"anyOf":[{"type":"object","required":["id","amount","payment_date","status","method","unit_id"],"properties":{"id":{"type":"string"},"amount":{"type":"number"},"currency":{"type":"string"},"payment_date":{},"status":{"type":"string"},"method":{"type":"string"},"reference":{"type":"string"},"bank":{"type":"string"},"unit_id":{"type":"string"},"building_id":{"type":"string"},"proof_url":{"type":"string"},"notes":{"type":"string"},"periods":{"type":"array","items":{"type":"string"}},"allocations":{"type":"array","items":{}},"created_at":{},"updated_at":{}}},{"type":"null"}]}},"multipart/form-data":{"schema":{"anyOf":[{"type":"object","required":["id","amount","payment_date","status","method","unit_id"],"properties":{"id":{"type":"string"},"amount":{"type":"number"},"currency":{"type":"string"},"payment_date":{},"status":{"type":"string"},"method":{"type":"string"},"reference":{"type":"string"},"bank":{"type":"string"},"unit_id":{"type":"string"},"building_id":{"type":"string"},"proof_url":{"type":"string"},"notes":{"type":"string"},"periods":{"type":"array","items":{"type":"string"}},"allocations":{"type":"array","items":{}},"created_at":{},"updated_at":{}}},{"type":"null"}]}},"text/plain":{"schema":{"anyOf":[{"type":"object","required":["id","amount","payment_date","status","method","unit_id"],"properties":{"id":{"type":"string"},"amount":{"type":"number"},"currency":{"type":"string"},"payment_date":{},"status":{"type":"string"},"method":{"type":"string"},"reference":{"type":"string"},"bank":{"type":"string"},"unit_id":{"type":"string"},"building_id":{"type":"string"},"proof_url":{"type":"string"},"notes":{"type":"string"},"periods":{"type":"array","items":{"type":"string"}},"allocations":{"type":"array","items":{}},"created_at":{},"updated_at":{}}},{"type":"null"}]}}}}},"operationId":"getPaymentsById","tags":["Payments"],"summary":"Get payment details","description":"Allows residents of the same unit, board members of the same building, and admins to view payment details.","parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}]}},"/payments/admin/payments":{"get":{"parameters":[{"schema":{"type":"string"},"in":"query","name":"building_id","required":false},{"schema":{"type":"string"},"in":"query","name":"status","required":false},{"schema":{"type":"string"},"in":"query","name":"period","required":false},{"schema":{"type":"string"},"in":"query","name":"year","required":false},{"schema":{"type":"string"},"in":"query","name":"unit_id","required":false}],"responses":{"200":{"items":{"type":"object","required":["id","amount","payment_date","status","method","unit_id"],"properties":{"id":{"type":"string"},"amount":{"type":"number"},"currency":{"type":"string"},"payment_date":{},"status":{"type":"string"},"method":{"type":"string"},"reference":{"type":"string"},"bank":{"type":"string"},"unit_id":{"type":"string"},"building_id":{"type":"string"},"proof_url":{"type":"string"},"notes":{"type":"string"},"periods":{"type":"array","items":{"type":"string"}},"allocations":{"type":"array","items":{}},"created_at":{},"updated_at":{}}},"content":{"application/json":{"schema":{"type":"array","items":{"type":"object","required":["id","amount","payment_date","status","method","unit_id"],"properties":{"id":{"type":"string"},"amount":{"type":"number"},"currency":{"type":"string"},"payment_date":{},"status":{"type":"string"},"method":{"type":"string"},"reference":{"type":"string"},"bank":{"type":"string"},"unit_id":{"type":"string"},"building_id":{"type":"string"},"proof_url":{"type":"string"},"notes":{"type":"string"},"periods":{"type":"array","items":{"type":"string"}},"allocations":{"type":"array","items":{}},"created_at":{},"updated_at":{}}}}},"multipart/form-data":{"schema":{"type":"array","items":{"type":"object","required":["id","amount","payment_date","status","method","unit_id"],"properties":{"id":{"type":"string"},"amount":{"type":"number"},"currency":{"type":"string"},"payment_date":{},"status":{"type":"string"},"method":{"type":"string"},"reference":{"type":"string"},"bank":{"type":"string"},"unit_id":{"type":"string"},"building_id":{"type":"string"},"proof_url":{"type":"string"},"notes":{"type":"string"},"periods":{"type":"array","items":{"type":"string"}},"allocations":{"type":"array","items":{}},"created_at":{},"updated_at":{}}}}},"text/plain":{"schema":{"type":"array","items":{"type":"object","required":["id","amount","payment_date","status","method","unit_id"],"properties":{"id":{"type":"string"},"amount":{"type":"number"},"currency":{"type":"string"},"payment_date":{},"status":{"type":"string"},"method":{"type":"string"},"reference":{"type":"string"},"bank":{"type":"string"},"unit_id":{"type":"string"},"building_id":{"type":"string"},"proof_url":{"type":"string"},"notes":{"type":"string"},"periods":{"type":"array","items":{"type":"string"}},"allocations":{"type":"array","items":{}},"created_at":{},"updated_at":{}}}}}}}},"operationId":"getPaymentsAdminPayments","tags":["Payments"],"summary":"List all payments (Admin/Board)","description":"Admin sees all payments, Board members see only their building payments","security":[{"BearerAuth":[]}]}},"/payments/admin/payments/{id}":{"patch":{"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]}},"text/plain":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]}}}}},"operationId":"patchPaymentsAdminPaymentsById","tags":["Payments"],"summary":"Update payment status (Admin/Board)","description":"Approve or reject a payment","security":[{"BearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"anyOf":[{"const":"PENDING","type":"string"},{"const":"APPROVED","type":"string"},{"const":"REJECTED","type":"string"}]},"notes":{"type":"string"},"approved_periods":{"type":"array","items":{"type":"string"}}}}},"multipart/form-data":{"schema":{"type":"object","required":["status"],"properties":{"status":{"anyOf":[{"const":"PENDING","type":"string"},{"const":"APPROVED","type":"string"},{"const":"REJECTED","type":"string"}]},"notes":{"type":"string"},"approved_periods":{"type":"array","items":{"type":"string"}}}}},"text/plain":{"schema":{"type":"object","required":["status"],"properties":{"status":{"anyOf":[{"const":"PENDING","type":"string"},{"const":"APPROVED","type":"string"},{"const":"REJECTED","type":"string"}]},"notes":{"type":"string"},"approved_periods":{"type":"array","items":{"type":"string"}}}}}}}}},"/billing/debt":{"post":{"parameters":[],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"unit_id":{"type":"string"},"amount":{"type":"number"},"period":{"type":"string"},"description":{"type":"string"},"status":{"type":"string"},"paid_amount":{"type":"number"},"due_date":{},"created_at":{},"updated_at":{}},"required":["id","unit_id","amount","period","status","paid_amount"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"id":{"type":"string"},"unit_id":{"type":"string"},"amount":{"type":"number"},"period":{"type":"string"},"description":{"type":"string"},"status":{"type":"string"},"paid_amount":{"type":"number"},"due_date":{},"created_at":{},"updated_at":{}},"required":["id","unit_id","amount","period","status","paid_amount"]}},"text/plain":{"schema":{"type":"object","properties":{"id":{"type":"string"},"unit_id":{"type":"string"},"amount":{"type":"number"},"period":{"type":"string"},"description":{"type":"string"},"status":{"type":"string"},"paid_amount":{"type":"number"},"due_date":{},"created_at":{},"updated_at":{}},"required":["id","unit_id","amount","period","status","paid_amount"]}}}}},"operationId":"postBillingDebt","tags":["Billing"],"summary":"Load debt to a unit (Admin/Board)","security":[{"BearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["unit_id","amount","period","description"],"properties":{"unit_id":{"type":"string"},"amount":{"anyOf":[{"type":"number"},{"type":"string"}]},"period":{"examples":["2026-01"],"type":"string"},"description":{"type":"string"},"due_date":{"type":"string"}}}},"multipart/form-data":{"schema":{"type":"object","required":["unit_id","amount","period","description"],"properties":{"unit_id":{"type":"string"},"amount":{"anyOf":[{"type":"number"},{"type":"string"}]},"period":{"examples":["2026-01"],"type":"string"},"description":{"type":"string"},"due_date":{"type":"string"}}}},"text/plain":{"schema":{"type":"object","required":["unit_id","amount","period","description"],"properties":{"unit_id":{"type":"string"},"amount":{"anyOf":[{"type":"number"},{"type":"string"}]},"period":{"examples":["2026-01"],"type":"string"},"description":{"type":"string"},"due_date":{"type":"string"}}}}}}}},"/billing/units/{id}/balance":{"get":{"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"unit":{"type":"string"},"totalDebt":{"type":"number"},"pendingInvoices":{"type":"number"},"details":{"type":"array","items":{"type":"object","required":["invoiceId","amount","paid","remaining","period","status"],"properties":{"invoiceId":{"type":"string"},"amount":{"type":"number"},"paid":{"type":"number"},"remaining":{"type":"number"},"period":{"type":"string"},"status":{"type":"string"}}}}},"required":["unit","totalDebt","pendingInvoices","details"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"unit":{"type":"string"},"totalDebt":{"type":"number"},"pendingInvoices":{"type":"number"},"details":{"type":"array","items":{"type":"object","required":["invoiceId","amount","paid","remaining","period","status"],"properties":{"invoiceId":{"type":"string"},"amount":{"type":"number"},"paid":{"type":"number"},"remaining":{"type":"number"},"period":{"type":"string"},"status":{"type":"string"}}}}},"required":["unit","totalDebt","pendingInvoices","details"]}},"text/plain":{"schema":{"type":"object","properties":{"unit":{"type":"string"},"totalDebt":{"type":"number"},"pendingInvoices":{"type":"number"},"details":{"type":"array","items":{"type":"object","required":["invoiceId","amount","paid","remaining","period","status"],"properties":{"invoiceId":{"type":"string"},"amount":{"type":"number"},"paid":{"type":"number"},"remaining":{"type":"number"},"period":{"type":"string"},"status":{"type":"string"}}}}},"required":["unit","totalDebt","pendingInvoices","details"]}}}}},"operationId":"getBillingUnitsByIdBalance","tags":["Billing"],"summary":"Get unit balance and pending invoices","security":[{"BearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}]}},"/billing/units/{id}/invoices":{"get":{"responses":{"200":{"items":{"type":"object","required":["id","unit_id","amount","period","status","paid_amount"],"properties":{"id":{"type":"string"},"unit_id":{"type":"string"},"amount":{"type":"number"},"period":{"type":"string"},"description":{"type":"string"},"status":{"type":"string"},"paid_amount":{"type":"number"},"due_date":{},"created_at":{},"updated_at":{}}},"content":{"application/json":{"schema":{"type":"array","items":{"type":"object","required":["id","unit_id","amount","period","status","paid_amount"],"properties":{"id":{"type":"string"},"unit_id":{"type":"string"},"amount":{"type":"number"},"period":{"type":"string"},"description":{"type":"string"},"status":{"type":"string"},"paid_amount":{"type":"number"},"due_date":{},"created_at":{},"updated_at":{}}}}},"multipart/form-data":{"schema":{"type":"array","items":{"type":"object","required":["id","unit_id","amount","period","status","paid_amount"],"properties":{"id":{"type":"string"},"unit_id":{"type":"string"},"amount":{"type":"number"},"period":{"type":"string"},"description":{"type":"string"},"status":{"type":"string"},"paid_amount":{"type":"number"},"due_date":{},"created_at":{},"updated_at":{}}}}},"text/plain":{"schema":{"type":"array","items":{"type":"object","required":["id","unit_id","amount","period","status","paid_amount"],"properties":{"id":{"type":"string"},"unit_id":{"type":"string"},"amount":{"type":"number"},"period":{"type":"string"},"description":{"type":"string"},"status":{"type":"string"},"paid_amount":{"type":"number"},"due_date":{},"created_at":{},"updated_at":{}}}}}}}},"operationId":"getBillingUnitsByIdInvoices","tags":["Billing"],"summary":"Get all invoices for a unit","security":[{"BearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}]}},"/billing/invoices/{id}/payments":{"get":{"responses":{"200":{"items":{"type":"object","required":["id","payment_id","invoice_id","amount","created_at"],"properties":{"id":{"type":"string"},"payment_id":{"type":"string"},"invoice_id":{"type":"string"},"amount":{"type":"number"},"created_at":{}}},"content":{"application/json":{"schema":{"type":"array","items":{"type":"object","required":["id","payment_id","invoice_id","amount","created_at"],"properties":{"id":{"type":"string"},"payment_id":{"type":"string"},"invoice_id":{"type":"string"},"amount":{"type":"number"},"created_at":{}}}}},"multipart/form-data":{"schema":{"type":"array","items":{"type":"object","required":["id","payment_id","invoice_id","amount","created_at"],"properties":{"id":{"type":"string"},"payment_id":{"type":"string"},"invoice_id":{"type":"string"},"amount":{"type":"number"},"created_at":{}}}}},"text/plain":{"schema":{"type":"array","items":{"type":"object","required":["id","payment_id","invoice_id","amount","created_at"],"properties":{"id":{"type":"string"},"payment_id":{"type":"string"},"invoice_id":{"type":"string"},"amount":{"type":"number"},"created_at":{}}}}}}}},"operationId":"getBillingInvoicesByIdPayments","tags":["Billing"],"summary":"Get all payments (allocations) for a specific invoice","security":[{"BearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}]}},"/billing/invoices/{id}":{"get":{"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"unit_id":{"type":"string"},"amount":{"type":"number"},"period":{"type":"string"},"description":{"type":"string"},"status":{"type":"string"},"paid_amount":{"type":"number"},"due_date":{},"created_at":{},"updated_at":{}},"required":["id","unit_id","amount","period","status","paid_amount"]}},"multipart/form-data":{"schema":{"type":"object","properties":{"id":{"type":"string"},"unit_id":{"type":"string"},"amount":{"type":"number"},"period":{"type":"string"},"description":{"type":"string"},"status":{"type":"string"},"paid_amount":{"type":"number"},"due_date":{},"created_at":{},"updated_at":{}},"required":["id","unit_id","amount","period","status","paid_amount"]}},"text/plain":{"schema":{"type":"object","properties":{"id":{"type":"string"},"unit_id":{"type":"string"},"amount":{"type":"number"},"period":{"type":"string"},"description":{"type":"string"},"status":{"type":"string"},"paid_amount":{"type":"number"},"due_date":{},"created_at":{},"updated_at":{}},"required":["id","unit_id","amount","period","status","paid_amount"]}}}}},"operationId":"getBillingInvoicesById","tags":["Billing"],"summary":"Get invoice details","security":[{"BearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"in":"path","name":"id","required":true}]}},"/health":{"get":{"operationId":"getHealth","responses":{"200":{}}}}}}
